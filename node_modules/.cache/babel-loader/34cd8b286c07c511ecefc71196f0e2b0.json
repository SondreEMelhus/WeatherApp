{"ast":null,"code":"var _jsxFileName = \"/Users/sondremelhus/DEV/ReactApps/weatherapp/src/componentes/Searchbar/searchbar.js\",\n    _s = $RefreshSig$();\n\n//This code has been borrowed from: https://github.com/kaxada/search-bar/blob/main/src/App.js\n//All credit goes to the original author\nimport { useState } from \"react\";\nimport Trie from \"./trie.js\";\nimport { database } from '../mockBackend/database';\nimport './SearchbarStyle.css'; //TODO: Fiks denne s책 den tar inn navnene fra database istedet for dictionary\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst data = database.map(location => location.name);\nconst listOfLocations = data.forEach(location => location.toLowerCase());\nconst dictionary = {\n  words: ['sandsli  ', 'paradis', 'os', '책sane', 'voss', 'fyllingsdalen', 'sotra']\n};\nexport function Searchbar(props) {\n  _s();\n\n  const [prefix, setPrefix] = useState(\"\");\n  const [suggestion, setSuggestion] = useState(\"\"); // const getWords = async() => {\n  //   const url = 'https://raw.githubusercontent.com/EKaxada/webster-words/main/dict.json'\n  //   const res = await fetch(url, {\n  //     method: 'GET'\n  //   });\n  //   return await res.json();\n  // }\n\n  var myTrie = new Trie();\n\n  (async () => {\n    // const dictionary = await getWords();\n    const words = dictionary.words;\n\n    for (let i = 0; i < words.length; i++) {\n      const word = words[i];\n      myTrie.insert(word);\n    }\n  })();\n\n  const onChange = e => {\n    var value = e.target.value;\n    props.setText(value);\n    setPrefix(value);\n    var words = value.split(\" \");\n    var trie_prefix = words[words.length - 1].toLowerCase();\n    var found_words = myTrie.find(trie_prefix).sort((a, b) => {\n      return a.length - b.length;\n    });\n    var first_word = found_words[0];\n\n    if (found_words.length !== 0 && value !== \"\" && value[value.length - 1] !== \" \") {\n      if (first_word != null) {\n        var remainder = first_word.slice(trie_prefix.length);\n        setSuggestion(value + remainder);\n      }\n    } else {\n      setSuggestion(value);\n    }\n  };\n\n  const handleKeyDown = e => {\n    if (e.keyCode === 39) {\n      setPrefix(suggestion);\n      props.setText(suggestion);\n    }\n\n    if (e.keyCode === 13) {\n      props.setText(prefix);\n      props.handSubmit();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App-Searchbar\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"search-bar\",\n      id: \"search-bar\",\n      placeholder: \"Search...\",\n      value: prefix,\n      onChange: onChange,\n      onKeyDown: handleKeyDown\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"search-bar\",\n      id: \"search-bar2\",\n      value: suggestion\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Searchbar, \"F4O5XQpIzZQE6OVCyyGWXTDz6ec=\");\n\n_c = Searchbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Searchbar\");","map":{"version":3,"sources":["/Users/sondremelhus/DEV/ReactApps/weatherapp/src/componentes/Searchbar/searchbar.js"],"names":["useState","Trie","database","data","map","location","name","listOfLocations","forEach","toLowerCase","dictionary","words","Searchbar","props","prefix","setPrefix","suggestion","setSuggestion","myTrie","i","length","word","insert","onChange","e","value","target","setText","split","trie_prefix","found_words","find","sort","a","b","first_word","remainder","slice","handleKeyDown","keyCode","handSubmit"],"mappings":"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","sourcesContent":["//This code has been borrowed from: https://github.com/kaxada/search-bar/blob/main/src/App.js\n//All credit goes to the original author\n\nimport { useState } from \"react\";\nimport Trie from \"./trie.js\";\nimport { database } from '../mockBackend/database';\nimport './SearchbarStyle.css';\n\n//TODO: Fiks denne s책 den tar inn navnene fra database istedet for dictionary\nconst data = database.map(location => location.name);\nconst listOfLocations = data.forEach(location => location.toLowerCase())\nconst dictionary = {\n  words: ['sandsli  ','paradis','os','책sane','voss','fyllingsdalen','sotra']\n}\n\nexport function Searchbar(props) {\n  const [prefix, setPrefix] = useState(\"\");\n  const [suggestion, setSuggestion] = useState(\"\");\n\n  // const getWords = async() => {\n  //   const url = 'https://raw.githubusercontent.com/EKaxada/webster-words/main/dict.json'\n  //   const res = await fetch(url, {\n  //     method: 'GET'\n  //   });\n  //   return await res.json();\n  // }\n\n  var myTrie = new Trie();\n\n  (async()=>{\n    // const dictionary = await getWords();\n    const words = dictionary.words;\n    for (let i = 0; i < words.length; i++) {\n        const word = words[i];\n        myTrie.insert(word)\n    }\n  })();\n\n  const onChange = (e) => {\n    var value = e.target.value;\n\n    props.setText(value);\n    setPrefix(value);\n    var words = value.split(\" \");\n    var trie_prefix = words[words.length - 1].toLowerCase();\n    var found_words = myTrie.find(trie_prefix).sort((a, b) => {\n      return a.length - b.length;\n    });\n    var first_word = found_words[0];\n    if (\n      found_words.length !== 0 &&\n      value !== \"\" &&\n      value[value.length - 1] !== \" \"\n    ) {\n      if (first_word != null) {\n        var remainder = first_word.slice(trie_prefix.length);\n        setSuggestion(value + remainder);\n      }\n    } else {\n      setSuggestion(value);\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 39) {\n      setPrefix(suggestion);\n      props.setText(suggestion)\n    }\n    if (e.keyCode === 13) {\n      props.setText(prefix);\n      props.handSubmit()\n    }\n  };\n\n  return (\n    <div className=\"App-Searchbar\">\n      <input\n        type=\"text\"\n        name=\"search-bar\"\n        id=\"search-bar\"\n        placeholder=\"Search...\"\n        value={prefix}\n        onChange={onChange}\n        onKeyDown={handleKeyDown}\n      />\n      <input\n        type=\"text\"\n        name=\"search-bar\"\n        id=\"search-bar2\"\n        value={suggestion}\n      />\n    </div>\n  );\n}\n\n"]},"metadata":{},"sourceType":"module"}